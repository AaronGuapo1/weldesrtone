<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Welderstone - Tienda</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
        <!-- Bootstrap-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
        <!-- CSS Stylesheet-->
        <link rel="stylesheet" href="css/styles.css">
        <!-- FontAwesome-->
        <script src="https://kit.fontawesome.com/360b0549be.js" crossorigin="anonymous"></script>
    </head>
    <body>
        <%- include('layouts/navbar'); -%> 
        <section id="tienda-filtros">
            <div class="row mt-4 px-5">
                <div class="col-1 text-truncate center-all rb-red">
                    <a class="filter-format" href="#">Hogar</a>
                </div>
                <div class="col-1 text-truncate center-all rb-red">
                    <a class="filter-format" href="#">Industria</a>
                </div>
                <div class="col-1 text-truncate center-all rb-red">
                    <a class="filter-format" href="#">Urbanismo</a>
                </div>
                <div class="col-1 text-truncate center-all rb-red">
                    <a class="filter-format" href="#">Ganadero</a>
                </div>
                <div class="col-1 text-truncate center-all rb-red">
                    <a class="filter-format" href="#" data-bs-toggle="tooltip" data-bs-title="Construccion y reciclados">Construccion y reciclados</a>
                </div>
                <div class="col-1 text-truncate center-all">
                    <a class="filter-format" href="#">Especiales</a>
                </div>
                <div class="col-6">
                    <form action="#" method="post">
                        <div class="input-group">
                            <input type="text" name="busqueda" class="form-control busquedaInput" placeholder="Busca aqui lo que necesites">
                            <button class="btn btn-outline-danger" type="submit">Limpiar</button>
                            <button type="submit" class="btn btn-outline-danger"><i class="fa-solid fa-magnifying-glass"></i></button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <hr class="border border-danger w-75" style="margin: 2rem auto;">

        <section id="tienda-productos">
            <div class="row">
                <% for (var a = 0; a < productos.docs.length; a++) { %> 
                   

                    <div class="col-sm-2">
                        <a href="/productos/<%=productos.docs[a].IdProducto%>">
                            <div class="card line">
                                <!-- Imagen -->
                                <img class="card-img-top mx-auto d-block" src="<%=productos.docs[a].image%>" alt="Product 1">
                                <!-- Cuerpo de la card -->
                                <div class="card-body">
                                    <!-- Nombre del producto -->
                                    <h4 class="card-title"><%=productos.docs[a].nombre%> </h4>
                                    <form action="/products-cart" method="POST">
                                        <!-- Precio -->
                                        <input type="hidden" name="nombre" value="<%=productos.docs[a].nombre%>">
                                        <input type="hidden" name="image" value="<%=productos.docs[a].image%>">
                                        <input type="hidden" name="precio" value="<%=productos.docs[a].precio%>">
                                        <% if(loggedIn) { %>
                                            <input type="hidden" name="UsuarioId" value="<%=IdUsuario%>"> 
                                        <% } %>

                                        <p class="card-text">Precio: <span class="price">$<%=productos.docs[a].precio.toFixed(2)%></span></p>
                                        
                                        <% if(loggedIn) { %>
                                            <button type="submit" class="btn btn-danger w-100" class="fa-solid fa-cart-shopping me-2">AÃ±adir al carro</button>

                                            <% for (var b = 0; b < cart.length; b++) { %>
                                                <% if(cart[b].nombre === productos.docs[a].nombre && cart[b].UsuarioId === IdUsuario){ %> 
                                                    <p>Agregado al carrito</p> 
                                                <% } %> 
                                            <% } %>                                 
                                        <% } %>
                                    </form>
                                </div>
                            </div>
                        </a>
                    </div>
                <% } %>
               
            </div>

            <div style="text-align: end;">
                <% for (var a = 1; a < productos.totalPages+1; a++) { %> 
                    <a href="/tienda?page=<%=[a]%>" style="color:white" type="submit" id="sendMessageButton" class="btn btn-dark"><%=[a]%></a>
                <% } %>
            </div>
        </section>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
        <script>
            const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
            const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
        </script>
    </body>
</html>



